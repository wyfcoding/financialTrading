syntax = "proto3";

package pricing;

option go_package = "github.com/fynnwu/FinancialTrading/go-api/pricing;pricing";

import "google/protobuf/timestamp.proto";

// PricingService 提供期权定价与希腊字母计算服务
service PricingService {
  // 获取期权价格
  rpc GetOptionPrice (GetOptionPriceRequest) returns (GetOptionPriceResponse);
  // 获取希腊字母
  rpc GetGreeks (GetGreeksRequest) returns (GetGreeksResponse);
}

// 期权合约
message OptionContract {
  string symbol = 1; // 交易对符号
  string type = 2; // 类型
  double strike_price = 3; // strike价格
  google.protobuf.Timestamp expiry_date = 4; // 过期date
}

// 希腊字母
message Greeks {
  double delta = 1; // Delta值
  double gamma = 2; // Gamma值
  double theta = 3; // Theta值
  double vega = 4; // Vega值
  double rho = 5; // Rho值
}

// 获取期权价格请求
message GetOptionPriceRequest {
  OptionContract contract = 1; // 合约
  double underlying_price = 2; // underlying价格
  double volatility = 3; // 波动率
  double risk_free_rate = 4; // 风险free率
}

// 获取期权价格响应
message GetOptionPriceResponse {
  double price = 1; // 价格
  google.protobuf.Timestamp calculation_time = 2; // calculation时间
}

// 获取希腊字母请求
message GetGreeksRequest {
  OptionContract contract = 1; // 合约
  double underlying_price = 2; // underlying价格
  double volatility = 3; // 波动率
  double risk_free_rate = 4; // 风险free率
}

// 获取希腊字母响应
message GetGreeksResponse {
  Greeks greeks = 1; // 希腊字母
  google.protobuf.Timestamp calculation_time = 2; // calculation时间
}
