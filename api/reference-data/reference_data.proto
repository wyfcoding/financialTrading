syntax = "proto3";

package reference_data;

option go_package = "github.com/fynnwu/FinancialTrading/go-api/reference-data;reference_data";

import "google/protobuf/timestamp.proto";

// ReferenceDataService 提供参考数据管理服务
service ReferenceDataService {
  // 获取交易对信息
  rpc GetSymbol (GetSymbolRequest) returns (GetSymbolResponse);
  // 列出所有交易对
  rpc ListSymbols (ListSymbolsRequest) returns (ListSymbolsResponse);
  
  // 获取交易所信息
  rpc GetExchange (GetExchangeRequest) returns (GetExchangeResponse);
  // 列出所有交易所
  rpc ListExchanges (ListExchangesRequest) returns (ListExchangesResponse);
}

// 交易对信息
message Symbol {
  string id = 1;
  string base_currency = 2;
  string quote_currency = 3;
  string exchange_id = 4;
  string symbol_code = 5; // e.g., BTC/USD
  string status = 6; // ACTIVE, SUSPENDED
  double min_order_size = 7;
  double price_precision = 8;
  google.protobuf.Timestamp created_at = 9;
  google.protobuf.Timestamp updated_at = 10;
}

// 交易所信息
message Exchange {
  string id = 1;
  string name = 2;
  string country = 3;
  string status = 4;
  string timezone = 5;
  google.protobuf.Timestamp created_at = 6;
  google.protobuf.Timestamp updated_at = 7;
}

// 获取交易对请求
message GetSymbolRequest {
  string id = 1;
  string symbol_code = 2;
}

// 获取交易对响应
message GetSymbolResponse {
  Symbol symbol = 1;
}

// 列出交易对请求
message ListSymbolsRequest {
  string exchange_id = 1;
  string status = 2;
  int32 page_size = 3;
  string page_token = 4;
}

// 列出交易对响应
message ListSymbolsResponse {
  repeated Symbol symbols = 1;
  string next_page_token = 2;
}

// 获取交易所请求
message GetExchangeRequest {
  string id = 1;
  string name = 2;
}

// 获取交易所响应
message GetExchangeResponse {
  Exchange exchange = 1;
}

// 列出交易所请求
message ListExchangesRequest {
  int32 page_size = 1;
  string page_token = 2;
}

// 列出交易所响应
message ListExchangesResponse {
  repeated Exchange exchanges = 1;
  string next_page_token = 2;
}
