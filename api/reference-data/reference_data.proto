syntax = "proto3";

package reference_data;

import "google/protobuf/timestamp.proto";

option go_package = "github.com/fynnwu/FinancialTrading/go-api/reference-data;reference_data";

// 参考数据服务，管理交易对参数、交易所配置及货币元数据。
service ReferenceDataService {
  // 查询合约或交易对的具体参数。
  rpc GetSymbol(GetSymbolRequest) returns (GetSymbolResponse);

  // 获取系统中所有受支持的交易对列表。
  rpc ListSymbols(ListSymbolsRequest) returns (ListSymbolsResponse);

  // 查询合作交易所的静态信息。
  rpc GetExchange(GetExchangeRequest) returns (GetExchangeResponse);

  // 获取系统中所有已对接的交易所。
  rpc ListExchanges(ListExchangesRequest) returns (ListExchangesResponse);
}

// 交易对元数据。
message Symbol {
  // 系统 ID。
  string id = 1;
  // 主币。
  string base_currency = 2;
  // 计价币。
  string quote_currency = 3;
  // 挂载交易所。
  string exchange_id = 4;
  // 显示代码 (如 BTC/USDT)。
  string symbol_code = 5;
  // 激活状态。
  string status = 6;
  // 最小单笔委托量。
  double min_order_size = 7;
  // 价格小数位数。
  double price_precision = 8;
  // 创建时间。
  google.protobuf.Timestamp created_at = 9;
  // 修改时间。
  google.protobuf.Timestamp updated_at = 10;
}

// 交易所元数据。
message Exchange {
  // 系统 ID。
  string id = 1;
  // 官方名称。
  string name = 2;
  // 所在地区。
  string country = 3;
  // 连接状态。
  string status = 4;
  // 标准时区。
  string timezone = 5;
  // 创建日期。
  google.protobuf.Timestamp created_at = 6;
  // 修改日期。
  google.protobuf.Timestamp updated_at = 7;
}

// 交易对查询请求。
message GetSymbolRequest {
  // 记录 ID。
  string id = 1;
  // 业务代码。
  string symbol_code = 2;
}

// 详情响应。
message GetSymbolResponse {
  // 交易对实体。
  Symbol symbol = 1;
}

// 交易对分页请求。
message ListSymbolsRequest {
  // 交易所筛选。
  string exchange_id = 1;
  // 状态筛选。
  string status = 2;
  // 数量。
  int32 page_size = 3;
  // 翻页令牌。
  string page_token = 4;
}

// 交易对分页响应。
message ListSymbolsResponse {
  // 实体序列。
  repeated Symbol symbols = 1;
  // 令牌。
  string next_page_token = 2;
}

// 交易所查询。
message GetExchangeRequest {
  // 记录 ID。
  string id = 1;
  // 交易所名。
  string name = 2;
}

// 交易所详情。
message GetExchangeResponse {
  // 实体。
  Exchange exchange = 1;
}

// 交易所列表请求。
message ListExchangesRequest {
  // 数量。
  int32 page_size = 1;
  // 令牌。
  string page_token = 2;
}

// 交易所列表响应。
message ListExchangesResponse {
  // 交易所序列。
  repeated Exchange exchanges = 1;
  // 令牌。
  string next_page_token = 2;
}
