# 金融交易系统 - 风控服务配置文件
version = "1.0.0"

[server]
name = "risk"
environment = "dev"

[server.http]
addr = "0.0.0.0"
port = 8115
timeout = "3s"

[server.grpc]
addr = "0.0.0.0"
port = 9115
timeout = "3s"

[log]
level = "info"
format = "json"
output = "stdout"

[tracing]
enabled = true
service_name = "risk"
otlp_endpoint = "localhost:4317"

[metrics]
enabled = true
port = "18115"
path = "/metrics"

[cache]
prefix = "risk:"
default_expiration = "1h"

[data.database]
driver = "mysql"
dsn = "root:root@tcp(127.0.0.1:3306)/trading_risk?charset=utf8mb4&parseTime=True&loc=Local"
max_idle_conns = 20
max_open_conns = 200

[data.redis]
addrs = ["127.0.0.1:6379"]
password = "redis_password"
db = 0
pool_size = 20

[messagequeue.kafka]
brokers = ["localhost:9092"]
topic = "risk-events"
group_id = "risk-group"

[risk]
max_position = 1000000
max_order_value = 100000
max_daily_loss = 50000
margin_call_level = 0.8
liquidation_level = 0.5

[services]
[services.account]
grpc_addr = "127.0.0.1:9103"
[services.position]
grpc_addr = "127.0.0.1:9104"
[services.marketdata]
grpc_addr = "127.0.0.1:9112"
