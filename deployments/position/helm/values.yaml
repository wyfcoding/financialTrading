image:
  repository: financialtrading/position
  pullPolicy: IfNotPresent
  tag: "latest"

service:
  type: ClusterIP
  grpcPort: 9089
  httpPort: 8089

config:
  server:
    name: "position-service"
    environment: "dev"
    http:
      port: 8089
      timeout: "10s"
    grpc:
      port: 9089
      timeout: "10s"
  log:
    level: "info"
    format: "json"
    output: "stdout"
  data:
    database:
      driver: "mysql"
      dsn: "root:password@tcp(mysql:3306)/financial_position?charset=utf8mb4&parseTime=True&loc=Local"
      max_idle_conns: 10
      max_open_conns: 100
      conn_max_lifetime: "1h"
    redis:
      addrs: ["redis:6379"]
      password: ""
      db: 0
      pool_size: 10
      min_idle_conns: 5
      read_timeout: "3s"
      write_timeout: "3s"
    elasticsearch:
      addresses: ["http://elasticsearch:9200"]
      username: ""
      password: ""
  messagequeue:
    kafka:
      brokers: ["kafka:9092"]
      topic: "position-events"
      group_id: ""
  tracing:
    enabled: false
    service_name: "position-service"
    otlp_endpoint: "otel-collector:4317"

canary:
  enabled: false
  version: v2
  trafficWeight: 10
  headerMatch:
    key: "x-canary"
    value: "always"

observability:
  tracing:
    provider: jaeger
    samplingRate: 100

resources:
  limits:
    cpu: 100m
    memory: 128Mi
  requests:
    cpu: 100m
    memory: 128Mi
